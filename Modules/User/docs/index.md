---
title: User
---

# User

用户管理模块，提供完整的用户体系管理功能。

## 功能特性

### 用户管理
- 用户基本信息管理（昵称、用户名、手机、邮箱等）
- 用户状态管理（启用/禁用）
- 用户VIP等级管理
- 用户关系管理（支持上下级关系）

### 余额系统
支持多种余额操作类型：
- **充值** - 用户余额增加
- **提现** - 用户余额减少（需要验证余额充足）
- **消费** - 用户消费扣款（需要验证余额充足）
- **退款** - 退款到用户余额
- **冻结** - 冻结用户余额
- **解冻** - 解冻用户余额

所有余额操作都会自动记录日志，并自动更新用户余额。

### 佣金系统
支持多种佣金操作类型：
- **提现** - 佣金提现
- **消费返佣** - 用户消费后返佣
- **冻结** - 冻结佣金
- **解冻** - 解冻佣金

所有佣金操作都会自动记录日志，并自动更新用户佣金。

### 积分系统
支持多种积分操作类型：
- **消费返积分** - 用户消费后返还积分
- **抵扣** - 积分抵扣消费
- **冻结** - 冻结积分
- **解冻** - 解冻积分

所有积分操作都会自动记录日志，并自动更新用户积分。

### VIP等级系统
- VIP等级管理（等级名称、图标、等级值）
- 用户VIP等级关联
- VIP等级状态管理

## 自动注册

模块启用时会自动注册：
- 用户管理菜单组和菜单项
- 用户余额操作字典
- 用户佣金操作字典
- 用户积分操作字典

## 观察者模式

模块使用观察者模式自动处理余额、佣金、积分变更：
- `UserBalanceObserver` - 监听余额日志创建，自动更新用户余额
- `UserCommissionObserver` - 监听佣金日志创建，自动更新用户佣金
- `UserIntegralObserver` - 监听积分日志创建，自动更新用户积分

所有操作都会进行余额/佣金/积分充足性验证，确保数据一致性。
